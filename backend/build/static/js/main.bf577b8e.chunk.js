(this.webpackJsonpblogilista=this.webpackJsonpblogilista||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(16),c=n.n(r),u=n(6),o=n(3),i=n.n(o),s=n(4),d=n(2),m=function(e){return l.a.createElement("h1",null,e.text)},h=function(e){return l.a.createElement("input",{type:e.type,placeholder:e.placeholder,onChange:e.handleOnChange,id:e.id,value:e.value,name:e.name})},f=function(e){return l.a.createElement("h2",null,e.text)},p=function(e){return l.a.createElement("div",null,l.a.createElement(f,{text:"Search"}),"Filter by Name: ",l.a.createElement(h,{placeholder:"Name..",handleOnChange:e.handleFilterOnChange}))},g=function(e){return l.a.createElement("button",{onClick:e.handleClick,type:e.type},e.text)},E=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{text:"Add New Blog"}),l.a.createElement("form",null,l.a.createElement("div",null,"Title: ",l.a.createElement(h,{placeholder:"Title..",handleOnChange:e.handleAddTitleOnChange,id:"titleInput0"}),l.a.createElement("br",null),"Author: ",l.a.createElement(h,{placeholder:"Author..",handleOnChange:e.handleAddAuthorOnChange,id:"authorInput0"}),l.a.createElement("br",null),"Url: ",l.a.createElement(h,{placeholder:"Url..",handleOnChange:e.handleAddUrlOnChange,id:"urlInput0"})),l.a.createElement("div",null,l.a.createElement(g,{type:"submit",handleClick:e.handleAddClick,text:"Add"}))))},b=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{text:"Blogs"}),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Author"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Likes"),l.a.createElement("th",null,"Like"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",null,e.blogs.map((function(t,n){return l.a.createElement("tr",{id:t.id,key:t.id},l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.author),l.a.createElement("td",null,t.url),l.a.createElement("td",null,t.likes),l.a.createElement("td",null,l.a.createElement(g,{text:"like",handleClick:function(){return e.handleLikeClick(t)}})),l.a.createElement("td",null,l.a.createElement(g,{text:"delete",handleClick:function(){return e.handleDeleteClick(t.id,t.title)}})))})))))},v=n(5),O=n.n(v),k=null,C={getAll:function(){return O.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,O.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e){return O.a.put("".concat("/api/blogs","/").concat(e.id),e).then((function(e){return e.data}))},deleteBlog:function(e){return O.a.delete("".concat("/api/blogs","/").concat(e)).then((function(e){return e}))},setToken:function(e){k="bearer ".concat(e)}},w=function(e){var t=e.message,n=e.notClassName;return null===t?null:l.a.createElement("div",{className:n},t)},x=function(e){return l.a.createElement("form",{onSubmit:e.handleLogin},l.a.createElement("div",null,"username",l.a.createElement(h,{type:"text",value:e.username,name:"Username",handleOnChange:function(t){var n=t.target;return e.setUsername(n.value)}})),l.a.createElement("div",null,"password",l.a.createElement(h,{type:"password",value:e.password,name:"Password",handleOnChange:function(t){var n=t.target;return e.setPassword(n.value)}})),l.a.createElement(g,{type:"submit",text:"Login"}))},j={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=(n(40),function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),h=o[0],f=o[1],v=Object(a.useState)(""),O=Object(d.a)(v,2),k=O[0],y=O[1],A=Object(a.useState)(""),S=Object(d.a)(A,2),I=S[0],B=S[1],L=Object(a.useState)(""),U=Object(d.a)(L,2),N=(U[0],U[1]),T=Object(a.useState)(n),D=Object(d.a)(T,2),F=D[0],J=D[1],P=Object(a.useState)(null),z=Object(d.a)(P,2),M=z[0],R=z[1],Y=Object(a.useState)(null),q=Object(d.a)(Y,2),G=q[0],H=q[1],K=Object(a.useState)(""),Q=Object(d.a)(K,2),V=Q[0],W=Q[1],X=Object(a.useState)(""),Z=Object(d.a)(X,2),$=Z[0],_=Z[1],ee=Object(a.useState)(null),te=Object(d.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){C.getAll().then((function(e){r(e),console.log(e),J(e)})).catch((function(e){ue("Error caught: ".concat(e),"error")}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);ae(t),C.setToken(t.token)}}),[]);var le=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j.login({username:V,password:$});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),C.setToken(n.token),ae(n),W(""),_(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),ue("wrong credentials","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,""!==h){e.next=6;break}ue("Input title","error"),e.next=23;break;case 6:if(""!==k){e.next=10;break}ue("Input author","error"),e.next=23;break;case 10:if(""!==I){e.next=14;break}ue("Input url","error"),e.next=23;break;case 14:return a={title:h,author:k,url:I,likes:0},e.next=17,C.create(a);case 17:l=e.sent,console.log(l),r(n.concat(l.savedBlog)),J(n.concat(l.savedBlog)),ue("Added ".concat(h),"success"),ce();case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),ue(e.t0,"error");case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){f(""),y(""),B(""),N(""),document.getElementById("titleInput0").value="",document.getElementById("authorInput0").value="",document.getElementById("urlInput0").value=""},ue=function(e,t){R(e),H(t),setTimeout((function(){R(null),H(null)}),5e3)};return null===ne?l.a.createElement("div",null,l.a.createElement(m,{text:"Bloglist"}),l.a.createElement(w,{message:M,notClassName:G}),l.a.createElement(x,{handleLogin:le,username:V,setUsername:W,password:$,setPassword:_})):l.a.createElement("div",null,l.a.createElement(m,{text:"Bloglist"}),l.a.createElement(w,{message:M,notClassName:G}),l.a.createElement("p",null,ne.name," logged in"),l.a.createElement(g,{text:"logout",handleClick:function(){console.log("logging out"),ae(null),window.localStorage.clear()}}),l.a.createElement(E,{handleAddTitleOnChange:function(e){f(e.target.value)},handleAddAuthorOnChange:function(e){y(e.target.value)},handleAddUrlOnChange:function(e){B(e.target.value)},handleAddClick:re}),l.a.createElement(p,{handleFilterOnChange:function(e){var t=n.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())}));J(t)}}),l.a.createElement(b,{blogs:F,handleDeleteClick:function(e,t){var a="Do you really want to delete ".concat(t,"?");window.confirm(a)&&C.deleteBlog(e).then((function(t){r(n.filter((function(t){return t.id!==e}))),J(n.filter((function(t){return t.id!==e})))})).catch((function(e){ue("".concat(t," has already been removed from the server"),"error")}))},handleLikeClick:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{likes:e.likes+=1});C.update(t).then((function(){r(n),ue("You liked ".concat(t.title),"success")}))}}))});c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.bf577b8e.chunk.js.map