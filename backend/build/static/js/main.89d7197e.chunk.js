(this.webpackJsonpblogilista=this.webpackJsonpblogilista||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(16),c=n.n(r),u=n(6),o=n(3),i=n.n(o),s=n(4),d=n(1),m=function(e){return l.a.createElement("h1",null,e.text)},h=function(e){return l.a.createElement("input",{type:e.type,placeholder:e.placeholder,onChange:e.handleOnChange,id:e.id,value:e.value,name:e.name})},f=function(e){return l.a.createElement("h2",null,e.text)},g=function(e){return l.a.createElement("div",null,l.a.createElement(f,{text:"Search"}),"Filter by Name: ",l.a.createElement(h,{placeholder:"Name..",handleOnChange:e.handleFilterOnChange}))},p=function(e){return l.a.createElement("button",{onClick:e.handleClick,type:e.type},e.text)},E=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{text:"Add New Blog"}),l.a.createElement("form",null,l.a.createElement("div",null,"Title: ",l.a.createElement(h,{placeholder:"Title..",handleOnChange:e.handleAddTitleOnChange,id:"titleInput0"}),l.a.createElement("br",null),"Author: ",l.a.createElement(h,{placeholder:"Author..",handleOnChange:e.handleAddAuthorOnChange,id:"authorInput0"}),l.a.createElement("br",null),"Url: ",l.a.createElement(h,{placeholder:"Url..",handleOnChange:e.handleAddUrlOnChange,id:"urlInput0"})),l.a.createElement("div",null,l.a.createElement(p,{type:"submit",handleClick:e.handleAddClick,text:"Add"}))))},b=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{text:"Blogs"}),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Author"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Likes"),l.a.createElement("th",null,"Like"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",null,e.blogs.map((function(t,n){return l.a.createElement("tr",{id:t.id,key:t.id},l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.author),l.a.createElement("td",null,t.url),l.a.createElement("td",null,t.likes),l.a.createElement("td",null,l.a.createElement(p,{text:"like",handleClick:function(){return e.handleLikeClick(t)}})),l.a.createElement("td",null,l.a.createElement(p,{text:"delete",handleClick:function(){return e.handleDeleteClick(t.id,t.title)}})))})))))},v=n(5),O=n.n(v),k=null,C={getAll:function(){return O.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,O.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e){return O.a.put("".concat("/api/blogs","/").concat(e.id),e).then((function(e){return e.data}))},deleteBlog:function(e){return O.a.delete("".concat("/api/blogs","/").concat(e)).then((function(e){return e}))},setToken:function(e){k="bearer ".concat(e)}},j=function(e){var t=e.message,n=e.notClassName;return null===t?null:l.a.createElement("div",{className:n},t)},w=function(e){return l.a.createElement("form",{onSubmit:e.handleLogin},l.a.createElement("div",null,"username",l.a.createElement(h,{type:"text",value:e.username,name:"Username",handleOnChange:function(t){var n=t.target;return e.setUsername(n.value)}})),l.a.createElement("div",null,"password",l.a.createElement(h,{type:"password",value:e.password,name:"Password",handleOnChange:function(t){var n=t.target;return e.setPassword(n.value)}})),l.a.createElement(p,{type:"submit",text:"Login"}))},x={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=(n(40),l.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),r=Object(d.a)(n,2),c=r[0],u=r[1],o={display:c?"none":""},i={display:c?"":"none"},s=function(){u(!c)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),l.a.createElement("div",null,l.a.createElement("div",{style:o},l.a.createElement(p,{handleClick:s,text:e.buttonLabel})),l.a.createElement("div",{style:i},e.children,l.a.createElement(p,{handleClick:s,text:"Cancel"})))}))),S=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),h=o[0],f=o[1],v=Object(a.useState)(""),O=Object(d.a)(v,2),k=O[0],S=O[1],A=Object(a.useState)(""),I=Object(d.a)(A,2),B=I[0],L=I[1],N=Object(a.useState)(""),U=Object(d.a)(N,2),T=(U[0],U[1]),D=Object(a.useState)(n),F=Object(d.a)(D,2),J=F[0],P=F[1],R=Object(a.useState)(null),V=Object(d.a)(R,2),z=V[0],H=V[1],M=Object(a.useState)(null),Y=Object(d.a)(M,2),q=Y[0],G=Y[1],K=Object(a.useState)(""),Q=Object(d.a)(K,2),W=Q[0],X=Q[1],Z=Object(a.useState)(""),$=Object(d.a)(Z,2),_=$[0],ee=$[1],te=Object(a.useState)(null),ne=Object(d.a)(te,2),ae=ne[0],le=ne[1];Object(a.useEffect)((function(){C.getAll().then((function(e){r(e),console.log(e),P(e)})).catch((function(e){oe("Error caught: ".concat(e),"error")}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);le(t),C.setToken(t.token)}}),[]);var re=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.login({username:W,password:_});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),C.setToken(n.token),le(n),X(""),ee(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),oe("wrong credentials","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,""!==h){e.next=6;break}oe("Input title","error"),e.next=23;break;case 6:if(""!==k){e.next=10;break}oe("Input author","error"),e.next=23;break;case 10:if(""!==B){e.next=14;break}oe("Input url","error"),e.next=23;break;case 14:return a={title:h,author:k,url:B,likes:0},ie.current.toggleVisibility(),e.next=18,C.create(a);case 18:l=e.sent,r(n.concat(l.savedBlog)),P(n.concat(l.savedBlog)),oe("Added ".concat(h),"success"),ue();case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),oe(e.t0,"error");case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){f(""),S(""),L(""),T(""),document.getElementById("titleInput0").value="",document.getElementById("authorInput0").value="",document.getElementById("urlInput0").value=""},oe=function(e,t){H(e),G(t),setTimeout((function(){H(null),G(null)}),5e3)},ie=l.a.createRef();return null===ae?l.a.createElement("div",null,l.a.createElement(m,{text:"Bloglist"}),l.a.createElement(j,{message:z,notClassName:q}),l.a.createElement(y,{buttonLabel:"Login"},l.a.createElement(w,{handleLogin:re,username:W,setUsername:X,password:_,setPassword:ee}))):l.a.createElement("div",null,l.a.createElement(m,{text:"Bloglist"}),l.a.createElement(j,{message:z,notClassName:q}),l.a.createElement("p",null,ae.name," logged in"),l.a.createElement(p,{text:"logout",handleClick:function(){console.log("logging out"),le(null),window.localStorage.clear()}}),l.a.createElement(y,{buttonLabel:"New Blog",ref:ie},l.a.createElement(E,{handleAddTitleOnChange:function(e){f(e.target.value)},handleAddAuthorOnChange:function(e){S(e.target.value)},handleAddUrlOnChange:function(e){L(e.target.value)},handleAddClick:ce})),l.a.createElement(g,{handleFilterOnChange:function(e){var t=n.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())}));P(t)}}),l.a.createElement(b,{blogs:J,handleDeleteClick:function(e,t){var a="Do you really want to delete ".concat(t,"?");window.confirm(a)&&C.deleteBlog(e).then((function(t){r(n.filter((function(t){return t.id!==e}))),P(n.filter((function(t){return t.id!==e})))})).catch((function(e){oe("".concat(t," has already been removed from the server"),"error")}))},handleLikeClick:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{likes:e.likes+=1});C.update(t).then((function(){r(n),oe("You liked ".concat(t.title),"success")}))}}))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(S,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.89d7197e.chunk.js.map