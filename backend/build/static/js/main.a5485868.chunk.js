(this.webpackJsonpblogilista=this.webpackJsonpblogilista||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(16),c=n.n(r),u=n(6),o=n(3),i=n.n(o),s=n(4),d=n(2),m=function(e){return l.a.createElement("h1",null,e.text)},h=function(e){return l.a.createElement("input",{type:e.type,placeholder:e.placeholder,onChange:e.handleOnChange,id:e.id,value:e.value,name:e.name})},f=function(e){return l.a.createElement("h2",null,e.text)},g=function(e){return l.a.createElement("div",null,l.a.createElement(f,{text:"Search"}),"Filter by Name: ",l.a.createElement(h,{placeholder:"Name..",handleOnChange:e.handleFilterOnChange}))},p=function(e){return l.a.createElement("button",{onClick:e.handleClick,type:e.type},e.text)},E=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{text:"Add New Blog"}),l.a.createElement("form",null,l.a.createElement("div",null,"Title: ",l.a.createElement(h,{placeholder:"Title..",handleOnChange:e.handleAddTitleOnChange,id:"titleInput0"}),l.a.createElement("br",null),"Author: ",l.a.createElement(h,{placeholder:"Author..",handleOnChange:e.handleAddAuthorOnChange,id:"authorInput0"}),l.a.createElement("br",null),"Url: ",l.a.createElement(h,{placeholder:"Url..",handleOnChange:e.handleAddUrlOnChange,id:"urlInput0"})),l.a.createElement("div",null,l.a.createElement(p,{type:"submit",handleClick:e.handleAddClick,text:"Add"}))))},b=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{text:"Blogs"}),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Author"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Likes"),l.a.createElement("th",null,"Like"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",null,e.blogs.map((function(t,n){return l.a.createElement("tr",{id:t.id,key:t.id},l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.author),l.a.createElement("td",null,t.url),l.a.createElement("td",null,t.likes),l.a.createElement("td",null,l.a.createElement(p,{text:"like",handleClick:function(){return e.handleLikeClick(t)}})),l.a.createElement("td",null,l.a.createElement(p,{text:"delete",handleClick:function(){return e.handleDeleteClick(t.id,t.title)}})))})))))},v=n(5),O=n.n(v),k=null,C={getAll:function(){return O.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,O.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e){return O.a.put("".concat("/api/blogs","/").concat(e.id),e).then((function(e){return e.data}))},deleteBlog:function(e){return O.a.delete("".concat("/api/blogs","/").concat(e)).then((function(e){return e}))},setToken:function(e){k="bearer ".concat(e)}},w=function(e){var t=e.message,n=e.notClassName;return null===t?null:l.a.createElement("div",{className:n},t)},j=function(e){return l.a.createElement("form",{onSubmit:e.handleLogin},l.a.createElement("div",null,"username",l.a.createElement(h,{type:"text",value:e.username,name:"Username",handleOnChange:function(t){var n=t.target;return e.setUsername(n.value)}})),l.a.createElement("div",null,"password",l.a.createElement(h,{type:"password",value:e.password,name:"Password",handleOnChange:function(t){var n=t.target;return e.setPassword(n.value)}})),l.a.createElement(p,{type:"submit",text:"Login"}))},x={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=(n(40),function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),h=o[0],f=o[1],v=Object(a.useState)(""),O=Object(d.a)(v,2),k=O[0],y=O[1],A=Object(a.useState)(""),S=Object(d.a)(A,2),B=S[0],L=S[1],U=Object(a.useState)(""),I=Object(d.a)(U,2),N=(I[0],I[1],Object(a.useState)(n)),T=Object(d.a)(N,2),D=T[0],F=T[1],J=Object(a.useState)(null),P=Object(d.a)(J,2),z=P[0],M=P[1],R=Object(a.useState)(null),Y=Object(d.a)(R,2),q=Y[0],G=Y[1],H=Object(a.useState)(""),K=Object(d.a)(H,2),Q=K[0],V=K[1],W=Object(a.useState)(""),X=Object(d.a)(W,2),Z=X[0],$=X[1],_=Object(a.useState)(null),ee=Object(d.a)(_,2),te=ee[0],ne=ee[1];Object(a.useEffect)((function(){C.getAll().then((function(e){r(e),console.log(e),F(e)})).catch((function(e){re("Error caught: ".concat(e),"error")}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);ne(t),C.setToken(t.token)}}),[]);var ae=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.login({username:Q,password:Z});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),C.setToken(n.token),ne(n),V(""),$(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),re("wrong credentials","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==h){e.next=5;break}re("Input title","error"),e.next=22;break;case 5:if(""!==k){e.next=9;break}re("Input author","error"),e.next=22;break;case 9:if(""!==B){e.next=13;break}re("Input url","error"),e.next=22;break;case 13:return a={title:h,author:k,url:B,likes:0},console.log("step0"),e.next=17,C.create(a);case 17:l=e.sent,console.log(l),r(n.concat(l.savedBlog)),F(n.concat(l.savedBlog)),re("Added ".concat(h),"success");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e,t){M(e),G(t),setTimeout((function(){M(null),G(null)}),5e3)};return null===te?l.a.createElement("div",null,l.a.createElement(m,{text:"Bloglist"}),l.a.createElement(w,{message:z,notClassName:q}),l.a.createElement(j,{handleLogin:ae,username:Q,setUsername:V,password:Z,setPassword:$})):l.a.createElement("div",null,l.a.createElement(m,{text:"Bloglist"}),l.a.createElement(w,{message:z,notClassName:q}),l.a.createElement("p",null,te.name," logged in"),l.a.createElement(p,{text:"logout",handleClick:function(){console.log("logging out"),ne(null),window.localStorage.clear()}}),l.a.createElement(E,{handleAddTitleOnChange:function(e){f(e.target.value)},handleAddAuthorOnChange:function(e){y(e.target.value)},handleAddUrlOnChange:function(e){L(e.target.value)},handleAddClick:le}),l.a.createElement(g,{handleFilterOnChange:function(e){var t=n.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())}));F(t)}}),l.a.createElement(b,{blogs:D,handleDeleteClick:function(e,t){var a="Do you really want to delete ".concat(t,"?");window.confirm(a)&&C.deleteBlog(e).then((function(t){r(n.filter((function(t){return t.id!==e}))),F(n.filter((function(t){return t.id!==e})))})).catch((function(e){re("".concat(t," has already been removed from the server"),"error")}))},handleLikeClick:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{likes:e.likes+=1});C.update(t).then((function(){r(n),re("You liked ".concat(t.title),"success")}))}}))});c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a5485868.chunk.js.map